export const translations = {
    en: {
        app_name: "Private Notes",
        sidebar: {
            all_notes: "All Notes",
            tags: "Tags",
            manage_tags: "Manage Tags",
            settings: "Settings",
            install_app: "Install App",
            system: "System",
            force_reload: "Force Cleanup & Reload"
        },
        header: {
            search_placeholder: "Search notes...",
            sync: "Sync Now",
            install: "Install",
            new_note: "New Note",
            view_title_all: "All Notes",
            view_desc_all: "Organize your thoughts and protect your privacy.",
            pinned: "Pinned"
        },
        notes: {
            no_notes: "No notes here"
        },
        auth: {
            title: "Protected Vault",
            desc: "Enter your master password to continue",
            unlock: "Unlock",
            setup_title: "Setup your Vault",
            setup_desc: "Create a master password. Enter it twice to confirm.",
            create_vault: "Create my Vault",
            confirm_pass: "Repeat password",
            pass_placeholder: "Your password",
            repeat_placeholder: "Repeat password",
            remember_me: "Remember my password in this browser",
            problems: "Problems? Force cleanup & reload",
            password_mismatch: "‚ö†Ô∏è Passwords do not match!",
            password_short: "Password must be at least 4 chars",
            vault_created: "‚úÖ Vault created successfully",
            vault_opened: "Vault opened",
            incorrect_pass: "‚ùå Incorrect password",
            setup_pass_first: "‚ö†Ô∏è Enter your password first to configure",
            bio_success: "‚úÖ Biometrics activated",
            bio_fail: "‚ùå Biometric auth failed",
            bio_unlock: "Unlock with Biometrics",
            bio_setup: "Enable Biometrics / FaceID",
            use_bio: "Use Biometrics / FaceID"
        },
        editor: {
            title_placeholder: "Note Title",
            content_placeholder: "Start writing...",
            saving: "Saving...",
            saved: "Saved",
            error_save: "Error saving",
            delete_confirm: "Delete this note?",
            close_unsaved: "Close without saving?",
            tools: {
                bg_color: "Background Color",
                text_format: "Text Format"
            }
        },
        settings: {
            title: "Settings",
            general: "General",
            sync: "Cloud Sync",
            security: "Security",
            danger: "Advanced Actions",
            theme: "Visual Theme",
            light: "Light",
            dark: "Dark",
            lang: "Language",
            maintenance: "Maintenance",
            installed_version: "Installed Version",
            sync_status: {
                connected: "Connected",
                disconnected: "Disconnected"
            },
            connect_drive: "Connect with Google Drive",
            drive_folder: "Drive Folder Name",
            drive_folder_hint: "Notes will be encrypted inside this folder.",
            notes_per_chunk: "Notes per file (Group)",
            notes_per_chunk_hint: "Defines how many notes are grouped per file.",
            save_changes: "Save Changes",
            session_security: "Session Security",
            logout: "Logout",
            logout_hint: "Logging out clears the access key from memory.",
            encryption: "Encryption",
            algo: "Preferred Algorithm",
            update_algo: "Update Algorithm",
            reset_app: "Reset Application",
            reset_warning: "This will permanently delete all local notes and categories.",
            reset_confirm_label: "To confirm, type \"confirm\" below:",
            reset_btn: "Delete all local data",
            reset_keyword: "confirm"
        },
        categories: {
            title: "Manage Categories",
            add_new: "New Category",
            name_placeholder: "Category Name",
            icon_label: "Icon",
            color_label: "Color",
            password_label: "Password (Optional)",
            password_hint: "Leave empty for no protection",
            create: "Create Category",
            edit: "Edit Category",
            delete: "Delete",
            save: "Save Category",
            delete_confirm: "Delete this category? Notes will be kept but untagged.",
            no_category: "Uncategorized"
        },
        common: {
            cancel: "Cancel",
            confirm: "Confirm",
            search: "Search",
            search_prompt: "Enter search term:",
            security_prompt: "Security",
            security_desc_prompt: "Enter password to continue",
            restricted_access: "Restricted Access",
            enter_cat_pass: "Enter password for category",
            write_here: "Write here..."
        },
        biometrics: {
            title: "Fingerprint / Face ID",
            desc: "Use biometrics to unlock your vault quickly",
            enabled: "Enabled",
            disabled: "Disabled",
            enable_btn: "Enable",
            disable_btn: "Disable",
            setup_prompt: "Enter your master password to enable biometrics",
            not_supported: "Your device does not support biometrics",
            success_enable: "‚úÖ Biometrics enabled",
            success_disable: "üîì Biometrics disabled",
            fail_enable: "‚ùå Failed to enable biometrics",
            incorrect_pass: "‚ùå Incorrect password"
        }
    },
    es: {
        app_name: "Notas Privadas",
        sidebar: {
            all_notes: "Todas las notas",
            tags: "Etiquetas",
            manage_tags: "Gestionar Etiquetas",
            settings: "Configuraci√≥n",
            install_app: "Instalar Aplicaci√≥n",
            system: "Sistema",
            force_reload: "Forzar Limpieza y Recarga"
        },
        header: {
            search_placeholder: "Buscar notas...",
            sync: "Sincronizar",
            install: "Instalar",
            new_note: "Nueva Nota",
            view_title_all: "Todas las notas",
            view_desc_all: "Organiza tus pensamientos y protege tu privacidad.",
            pinned: "Destacadas"
        },
        notes: {
            no_notes: "No hay notas aqu√≠"
        },
        auth: {
            title: "B√≥veda Protegida",
            desc: "Ingresa tu contrase√±a maestra para continuar",
            unlock: "Desbloquear",
            setup_title: "Configura tu B√≥veda",
            setup_desc: "Crea una contrase√±a maestra. Introduce la contrase√±a dos veces para asegurar que es correcta.",
            create_vault: "Crear mi B√≥veda",
            confirm_pass: "Repite la contrase√±a",
            pass_placeholder: "Tu contrase√±a",
            repeat_placeholder: "Repite la contrase√±a",
            remember_me: "Recordar mi contrase√±a en este navegador",
            problems: "¬øProblemas? Forzar limpieza y recarga",
            password_mismatch: "‚ö†Ô∏è ¬°Las contrase√±as no coinciden!",
            password_short: "La contrase√±a debe tener al menos 4 caracteres",
            vault_created: "‚úÖ B√≥veda creada con √©xito",
            vault_opened: "B√≥veda abierta",
            incorrect_pass: "‚ùå Contrase√±a incorrecta",
            setup_pass_first: "‚ö†Ô∏è Ingresa tu contrase√±a primero para configurar",
            bio_success: "‚úÖ Huella activada",
            bio_fail: "‚ùå Autenticaci√≥n biom√©trica fallida",
            bio_unlock: "Desbloquear con Huella",
            bio_setup: "Activar Huella / FaceID",
            use_bio: "Usar Huella / FaceID"
        },
        editor: {
            title_placeholder: "T√≠tulo de la nota",
            content_placeholder: "Empieza a escribir...",
            saving: "Guardando...",
            saved: "Guardado",
            error_save: "Error al guardar",
            delete_confirm: "¬øEliminar esta nota?",
            close_unsaved: "¬øCerrar sin guardar?",
            tools: {
                bg_color: "Color de Fondo",
                text_format: "Formato de Texto"
            }
        },
        settings: {
            title: "Configuraci√≥n",
            general: "General",
            sync: "Sincronizaci√≥n Cloud",
            security: "Seguridad y Sesi√≥n",
            danger: "Acciones Avanzadas",
            theme: "Tema Visual",
            light: "Claro",
            dark: "Oscuro",
            lang: "Idioma",
            maintenance: "Mantenimiento",
            installed_version: "Versi√≥n Instalada",
            sync_status: {
                connected: "Conectado",
                disconnected: "Desconectado"
            },
            connect_drive: "Conectar con Google Drive",
            drive_folder: "Nombre de carpeta en Drive",
            drive_folder_hint: "Las notas se guardar√°n encriptadas dentro de esta carpeta.",
            notes_per_chunk: "Notas por archivo (Grupo)",
            notes_per_chunk_hint: "Define cu√°ntas notas se agrupar√°n en cada archivo.",
            save_changes: "Guardar Cambios",
            session_security: "Seguridad de la Sesi√≥n",
            logout: "Cerrar Sesi√≥n",
            logout_hint: "Cerrar la sesi√≥n actual eliminar√° la clave de acceso de la memoria.",
            encryption: "Encriptaci√≥n",
            algo: "Algoritmo preferido",
            update_algo: "Actualizar Algoritmo",
            reset_app: "Restablecer Aplicaci√≥n",
            reset_warning: "Esta acci√≥n borrar√° permanentemente todas las notas y categor√≠as almacenadas localmente.",
            reset_confirm_label: "Para confirmar, escribe \"confirmar\" a continuaci√≥n:",
            reset_btn: "Eliminar todos los datos locales",
            reset_keyword: "confirmar"
        },
        categories: {
            title: "Gestionar Categor√≠as",
            add_new: "Nueva Categor√≠a",
            name_placeholder: "Nombre de la categor√≠a",
            icon_label: "Icono",
            color_label: "Color",
            password_label: "Contrase√±a (Opcional)",
            password_hint: "Dejar vac√≠o para sin protecci√≥n",
            create: "Crear Categor√≠a",
            edit: "Editar Categor√≠a",
            delete: "Eliminar",
            save: "Guardar Categor√≠a",
            delete_confirm: "¬øEliminar esta categor√≠a? Las notas se mantendr√°n pero sin etiqueta.",
            no_category: "Sin categor√≠a"
        },
        common: {
            cancel: "Cancelar",
            confirm: "Confirmar",
            search: "Buscar",
            search_prompt: "Ingresa t√©rmino de b√∫squeda:",
            security_prompt: "Seguridad",
            security_desc_prompt: "Ingresa la contrase√±a para continuar",
            restricted_access: "Acceso Restringido",
            enter_cat_pass: "Ingresa la contrase√±a para",
            write_here: "Escribe aqu√≠..."
        },
        biometrics: {
            title: "Huella / Face ID",
            desc: "Usa biometr√≠a para desbloquear tu b√≥veda r√°pidamente",
            enabled: "Activado",
            disabled: "Desactivado",
            enable_btn: "Activar",
            disable_btn: "Desactivar",
            setup_prompt: "Ingresa tu contrase√±a maestra para activar la biometr√≠a",
            not_supported: "Tu dispositivo no soporta biometr√≠a",
            success_enable: "‚úÖ Biometr√≠a activada",
            success_disable: "üîì Biometr√≠a desactivada",
            fail_enable: "‚ùå Error al activar biometr√≠a",
            incorrect_pass: "‚ùå Contrase√±a incorrecta"
        }
    }
};

export let currentLang = 'en';

export function initI18n() {
    const saved = localStorage.getItem('cn_lang');
    const browser = navigator.language.split('-')[0];
    // Default to EN if not ES
    currentLang = saved || (browser === 'es' ? 'es' : 'en');
    document.documentElement.lang = currentLang;
}

export function setLanguage(lang) {
    if (translations[lang]) {
        currentLang = lang;
        localStorage.setItem('cn_lang', lang);
        document.documentElement.lang = lang;
        location.reload(); // Simple reload to apply all changes
    }
}

export function t(key) {
    const keys = key.split('.');
    let val = translations[currentLang];
    for (const k of keys) {
        val = val?.[k];
        if (!val) break;
    }
    return val || key;
}
